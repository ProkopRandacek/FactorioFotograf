# Factorio Fotograf

Minimalistic Factorio map generator for Linux.  
I assume that your Factorio folder is in `~/.factorio`

## Usage
`./run savename`  
Where `savename` is the save name. Sometimes it needs to end with `.zip` sometimes it does not. I don't know why.  
For very large maps Factorio can eat a lot of ram while capturing.

## Image optimization
Command                                                                      | Description           | %save | Time
-----------------------------------------------------------------------------|-----------------------|-------|-----
`find dir -name "*.png" \| parallel --bar optipng -o 2 {}`                   | optimizes all pngs    | ~30 % | slow
`find dir -name "*.png" \| parallel --bar "mogrify -format jpg {} && rm {}"` | converts pngs to jpgs | ~75 % | fast

Notes:
- `yay -S parallel optipng imagemagick --needed`
- `dir` is the web root that was generated by the `run` script
- If you convert the images to jpg, you need to change the first line of `index.js` from png to jpg

## Deps
Non-headless Factorio runnable by `factorio` (`yay -S factorio` or [download here](https://factorio.com/download) and then add the binary to PATH)  
`jq`, `convert`, `gcc`

## Task list
- [x] Lua mod
- [x] Image merge tool
- [x] Web
- [x] Generate lower zoom levels
- [ ] Compatible with other mods

