// vim: ft=javascript
var map_info = JSON.parse(map_info_string);
var permalink = link.getMapLocation(5, [0, 0]);

var surface = L.tileLayer('images/0/{z}/{x}_{y}.' + map_info.image_type, {
	attribution: 'Generated by <a href="https://github.com/ProkopRandacek/FactorioFotograf">FactorioFotograf</a>',
	maxZoom: 8,
	minZoom: 0,
	zoomOffset: 0,
	noWrap: true,
	tileSize: map_info.image_resolution,
})

var map = L.map('map', {
	layers: [surface],
	crs: L.CRS.Simple,
	center: permalink.center,
	zoom: permalink.zoom
})

link.setup(map); // position-in-url plugin thing for leaflet

